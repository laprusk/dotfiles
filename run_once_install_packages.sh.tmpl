#!/bin/sh

sudo -v

{{ if eq .chezmoi.os "linux" }}

# Arch Linux
{{   if eq .chezmoi.osRelease.idLike "arch" }}

sudo pacman -Syu --noconfirm
sudo pacman -S --needed --noconfirm \
    curl \
    git \
    sheldon \
    starship \
    zsh

# Debian
{{   else if eq .chezmoi.osRelease.idLike "debian" }}

sudo apt-get update
sudo apt-get install -y --no-install-recommends \
    curl \
    git \
    zsh

# sheldon
echo "Installing sheldon..."
curl --proto '=https' -fLsS https://rossmacarthur.github.io/install/crate.sh \
    | bash -s -- --repo rossmacarthur/sheldon --to ~/.local/bin

# starship
echo "Installing starship..."
yes | sh -c "$(curl -fsSL https://starship.rs/install.sh)"

{{   end }}
{{ end }}

# Set zsh as default shell
chsh -s "$(command -v zsh)"
