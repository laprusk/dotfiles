#!/bin/sh

sudo -v

{{ if eq .chezmoi.os "linux" }}
{{   if (or (eq .chezmoi.osRelease.id "arch") (eq .chezmoi.osRelease.idLike "arch" )) }}
# Arch-based

sudo pacman -Syyu --noconfirm
sudo pacman -S --needed --noconfirm \
    curl \
    git \
    sheldon \
    starship \
    zsh

{{   else if (or (eq .chezmoi.osRelease.id "debian") (eq .chezmoi.osRelease.idLike "debian" )) }}
# Debian-based

sudo apt-get update
sudo apt-get install -y --no-install-recommends \
    curl \
    git \
    zsh

# sheldon
echo "Installing sheldon..."
curl --proto '=https' -fLsS https://rossmacarthur.github.io/install/crate.sh \
    | bash -s -- --repo rossmacarthur/sheldon --to ~/.local/bin

# starship
echo "Installing starship..."
curl -sS https://starship.rs/install.sh | sh -s -- --yes

{{   end }}
{{ end }}

# Set zsh as default shell
sudo chsh -s "$(command -v zsh)" "${USER}"
 